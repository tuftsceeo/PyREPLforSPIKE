{"ast":null,"code":"var url = require('url');\n\nvar http = require('http');\n\nvar https = require('https');\n\nvar through = require('through2');\n\nvar duplexer = require('duplexer2');\n\nvar bufferFrom = require('buffer-from');\n\nmodule.exports = hyperquest;\n\nfunction bind(obj, fn) {\n  var args = Array.prototype.slice.call(arguments, 2);\n  return function () {\n    var argv = args.concat(Array.prototype.slice.call(arguments));\n    return fn.apply(obj, argv);\n  };\n}\n\nfunction hyperquest(uri, opts, cb, extra) {\n  if (typeof uri === 'object') {\n    cb = opts;\n    opts = uri;\n    uri = undefined;\n  }\n\n  if (typeof opts === 'function') {\n    cb = opts;\n    opts = undefined;\n  }\n\n  if (!opts) opts = {};\n  if (uri !== undefined) opts.uri = uri;\n  if (extra) opts.method = extra.method;\n  var req = new Req(opts);\n  var ws = req.duplex && through();\n  var rs = through();\n  var dup = req.duplex ? duplexer(ws, rs) : rs;\n\n  if (!req.duplex) {\n    rs.writable = false;\n  }\n\n  dup.request = req;\n  dup.setHeader = bind(req, req.setHeader);\n  dup.setLocation = bind(req, req.setLocation);\n  var closed = false;\n  dup.on('close', function () {\n    closed = true;\n  });\n  process.nextTick(function () {\n    if (closed) return;\n    dup.on('close', function () {\n      r.destroy();\n    });\n\n    var r = req._send();\n\n    r.on('error', bind(dup, dup.emit, 'error'));\n    dup.emit('request', r);\n    r.on('response', function (res) {\n      dup.response = res;\n      dup.emit('response', res);\n      if (req.duplex) res.pipe(rs);else {\n        res.on('data', function (buf) {\n          rs.push(buf);\n        });\n        res.on('end', function () {\n          rs.push(null);\n        });\n      }\n    });\n\n    if (req.duplex) {\n      ws.pipe(r);\n    } else r.end();\n  });\n\n  if (cb) {\n    dup.on('error', cb);\n    dup.on('response', bind(dup, cb, null));\n  }\n\n  return dup;\n}\n\nhyperquest.get = hyperquest;\n\nhyperquest.post = function (uri, opts, cb) {\n  return hyperquest(uri, opts, cb, {\n    method: 'POST'\n  });\n};\n\nhyperquest.put = function (uri, opts, cb) {\n  return hyperquest(uri, opts, cb, {\n    method: 'PUT'\n  });\n};\n\nhyperquest['delete'] = function (uri, opts, cb) {\n  return hyperquest(uri, opts, cb, {\n    method: 'DELETE'\n  });\n};\n\nfunction Req(opts) {\n  this.headers = opts.headers || {};\n  var method = (opts.method || 'GET').toUpperCase();\n  this.method = method;\n  this.duplex = !(method === 'GET' || method === 'HEAD');\n  this.auth = opts.auth;\n  this.options = opts;\n  if (opts.uri) this.setLocation(opts.uri);\n}\n\nReq.prototype._send = function () {\n  this._sent = true;\n  var headers = this.headers || {};\n  var u = url.parse(this.uri);\n  var au = u.auth || this.auth;\n\n  if (au) {\n    headers.authorization = 'Basic ' + bufferFrom(au).toString('base64');\n  }\n\n  var protocol = u.protocol || '';\n  var iface = protocol === 'https:' ? https : http;\n  var opts = {\n    scheme: protocol.replace(/:$/, ''),\n    method: this.method,\n    host: u.hostname,\n    port: Number(u.port) || (protocol === 'https:' ? 443 : 80),\n    path: u.path,\n    agent: this.options.agent || false,\n    headers: headers,\n    withCredentials: this.options.withCredentials,\n    localAddress: this.options.localAddress\n  };\n\n  if (protocol === 'https:') {\n    opts.pfx = this.options.pfx;\n    opts.key = this.options.key;\n    opts.cert = this.options.cert;\n    opts.ca = this.options.ca;\n    opts.ciphers = this.options.ciphers;\n    opts.rejectUnauthorized = this.options.rejectUnauthorized;\n    opts.secureProtocol = this.options.secureProtocol;\n  }\n\n  var req = iface.request(opts);\n  var timeout = this.options.timeout || 2147483647;\n  if (req.setTimeout) req.setTimeout(timeout);\n  return req;\n};\n\nReq.prototype.setHeader = function (key, value) {\n  if (this._sent) throw new Error('request already sent');\n  this.headers[key] = value;\n  return this;\n};\n\nReq.prototype.setLocation = function (uri) {\n  this.uri = uri;\n  return this;\n};","map":{"version":3,"names":["url","require","http","https","through","duplexer","bufferFrom","module","exports","hyperquest","bind","obj","fn","args","Array","prototype","slice","call","arguments","argv","concat","apply","uri","opts","cb","extra","undefined","method","req","Req","ws","duplex","rs","dup","writable","request","setHeader","setLocation","closed","on","process","nextTick","r","destroy","_send","emit","res","response","pipe","buf","push","end","get","post","put","headers","toUpperCase","auth","options","_sent","u","parse","au","authorization","toString","protocol","iface","scheme","replace","host","hostname","port","Number","path","agent","withCredentials","localAddress","pfx","key","cert","ca","ciphers","rejectUnauthorized","secureProtocol","timeout","setTimeout","value","Error"],"sources":["C:/Users/gsess/node_modules/hyperquest/index.js"],"sourcesContent":["var url = require('url');\nvar http = require('http');\nvar https = require('https');\nvar through = require('through2');\nvar duplexer = require('duplexer2');\nvar bufferFrom = require('buffer-from');\n\nmodule.exports = hyperquest;\n\nfunction bind (obj, fn) {\n    var args = Array.prototype.slice.call(arguments, 2);\n    return function () {\n        var argv = args.concat(Array.prototype.slice.call(arguments));\n        return fn.apply(obj, argv);\n    }\n}\n\nfunction hyperquest (uri, opts, cb, extra) {\n    if (typeof uri === 'object') {\n        cb = opts;\n        opts = uri;\n        uri = undefined;\n    }\n    if (typeof opts === 'function') {\n      cb = opts;\n      opts = undefined;\n    }\n    if (!opts) opts = {};\n    if (uri !== undefined) opts.uri = uri;\n    if (extra) opts.method = extra.method;\n    \n    var req = new Req(opts);\n    var ws = req.duplex && through();\n    var rs = through();\n    \n    var dup = req.duplex ? duplexer(ws, rs) : rs;\n    if (!req.duplex) {\n        rs.writable = false;\n    }\n    dup.request = req;\n    dup.setHeader = bind(req, req.setHeader);\n    dup.setLocation = bind(req, req.setLocation);\n    \n    var closed = false;\n    dup.on('close', function () { closed = true });\n    \n    process.nextTick(function () {\n        if (closed) return;\n        dup.on('close', function () { r.destroy() });\n        \n        var r = req._send();\n        r.on('error', bind(dup, dup.emit, 'error'));\n        dup.emit('request', r);\n        \n        r.on('response', function (res) {\n            dup.response = res;\n            dup.emit('response', res);\n            if (req.duplex) res.pipe(rs)\n            else {\n                res.on('data', function (buf) { rs.push(buf) });\n                res.on('end', function () { rs.push(null) });\n            }\n        });\n        \n        if (req.duplex) {\n            ws.pipe(r);\n        }\n        else r.end();\n    });\n    \n    if (cb) {\n        dup.on('error', cb);\n        dup.on('response', bind(dup, cb, null));\n    }\n    return dup;\n}\n\nhyperquest.get = hyperquest;\n\nhyperquest.post = function (uri, opts, cb) {\n    return hyperquest(uri, opts, cb, { method: 'POST' });\n};\n\nhyperquest.put = function (uri, opts, cb) {\n    return hyperquest(uri, opts, cb, { method: 'PUT' });\n};\n\nhyperquest['delete'] = function (uri, opts, cb) {\n    return hyperquest(uri, opts, cb, { method: 'DELETE' });\n};\n\nfunction Req (opts) {\n    this.headers = opts.headers || {};\n    \n    var method = (opts.method || 'GET').toUpperCase();\n    this.method = method;\n    this.duplex = !(method === 'GET' || method === 'HEAD');\n    this.auth = opts.auth;\n    \n    this.options = opts;\n    \n    if (opts.uri) this.setLocation(opts.uri);\n}\n\nReq.prototype._send = function () {\n    this._sent = true;\n    \n    var headers = this.headers || {};\n    var u = url.parse(this.uri);\n    var au = u.auth || this.auth;\n    if (au) {\n        headers.authorization = 'Basic ' + bufferFrom(au).toString('base64');\n    }\n    \n    var protocol = u.protocol || '';\n    var iface = protocol === 'https:' ? https : http;\n    var opts = {\n        scheme: protocol.replace(/:$/, ''),\n        method: this.method,\n        host: u.hostname,\n        port: Number(u.port) || (protocol === 'https:' ? 443 : 80),\n        path: u.path,\n        agent: this.options.agent || false,\n        headers: headers,\n        withCredentials: this.options.withCredentials,\n        localAddress: this.options.localAddress\n    };\n    if (protocol === 'https:') {\n        opts.pfx = this.options.pfx;\n        opts.key = this.options.key;\n        opts.cert = this.options.cert;\n        opts.ca = this.options.ca;\n        opts.ciphers = this.options.ciphers;\n        opts.rejectUnauthorized = this.options.rejectUnauthorized;\n        opts.secureProtocol = this.options.secureProtocol;\n    }\n    var req = iface.request(opts);\n\n    var timeout = this.options.timeout || 2147483647;\n    if (req.setTimeout) req.setTimeout(timeout);\n    return req;\n};\n\nReq.prototype.setHeader = function (key, value) {\n    if (this._sent) throw new Error('request already sent');\n    this.headers[key] = value;\n    return this;\n};\n\nReq.prototype.setLocation = function (uri) {\n    this.uri = uri;\n    return this;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}