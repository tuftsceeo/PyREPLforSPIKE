{"ast":null,"code":"'use strict';\n\nconst color = require('kleur');\n\nconst Prompt = require('./prompt');\n\nconst {\n  erase,\n  cursor\n} = require('sisteransi');\n\nconst {\n  style,\n  clear,\n  figures,\n  wrap,\n  entriesToDisplay\n} = require('../util');\n\nconst getVal = (arr, i) => arr[i] && (arr[i].value || arr[i].title || arr[i]);\n\nconst getTitle = (arr, i) => arr[i] && (arr[i].title || arr[i].value || arr[i]);\n\nconst getIndex = (arr, valOrTitle) => {\n  const index = arr.findIndex(el => el.value === valOrTitle || el.title === valOrTitle);\n  return index > -1 ? index : undefined;\n};\n/**\n * TextPrompt Base Element\n * @param {Object} opts Options\n * @param {String} opts.message Message\n * @param {Array} opts.choices Array of auto-complete choices objects\n * @param {Function} [opts.suggest] Filter function. Defaults to sort by title\n * @param {Number} [opts.limit=10] Max number of results to show\n * @param {Number} [opts.cursor=0] Cursor start position\n * @param {String} [opts.style='default'] Render style\n * @param {String} [opts.fallback] Fallback message - initial to default value\n * @param {String} [opts.initial] Index of the default value\n * @param {Boolean} [opts.clearFirst] The first ESCAPE keypress will clear the input\n * @param {Stream} [opts.stdin] The Readable stream to listen to\n * @param {Stream} [opts.stdout] The Writable stream to write readline data to\n * @param {String} [opts.noMatches] The no matches found label\n */\n\n\nclass AutocompletePrompt extends Prompt {\n  constructor() {\n    let opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(opts);\n    this.msg = opts.message;\n    this.suggest = opts.suggest;\n    this.choices = opts.choices;\n    this.initial = typeof opts.initial === 'number' ? opts.initial : getIndex(opts.choices, opts.initial);\n    this.select = this.initial || opts.cursor || 0;\n    this.i18n = {\n      noMatches: opts.noMatches || 'no matches found'\n    };\n    this.fallback = opts.fallback || this.initial;\n    this.clearFirst = opts.clearFirst || false;\n    this.suggestions = [];\n    this.input = '';\n    this.limit = opts.limit || 10;\n    this.cursor = 0;\n    this.transform = style.render(opts.style);\n    this.scale = this.transform.scale;\n    this.render = this.render.bind(this);\n    this.complete = this.complete.bind(this);\n    this.clear = clear('', this.out.columns);\n    this.complete(this.render);\n    this.render();\n  }\n\n  set fallback(fb) {\n    this._fb = Number.isSafeInteger(parseInt(fb)) ? parseInt(fb) : fb;\n  }\n\n  get fallback() {\n    let choice;\n    if (typeof this._fb === 'number') choice = this.choices[this._fb];else if (typeof this._fb === 'string') choice = {\n      title: this._fb\n    };\n    return choice || this._fb || {\n      title: this.i18n.noMatches\n    };\n  }\n\n  moveSelect(i) {\n    this.select = i;\n    if (this.suggestions.length > 0) this.value = getVal(this.suggestions, i);else this.value = this.fallback.value;\n    this.fire();\n  }\n\n  async complete(cb) {\n    const p = this.completing = this.suggest(this.input, this.choices);\n    const suggestions = await p;\n    if (this.completing !== p) return;\n    this.suggestions = suggestions.map((s, i, arr) => ({\n      title: getTitle(arr, i),\n      value: getVal(arr, i),\n      description: s.description\n    }));\n    this.completing = false;\n    const l = Math.max(suggestions.length - 1, 0);\n    this.moveSelect(Math.min(l, this.select));\n    cb && cb();\n  }\n\n  reset() {\n    this.input = '';\n    this.complete(() => {\n      this.moveSelect(this.initial !== void 0 ? this.initial : 0);\n      this.render();\n    });\n    this.render();\n  }\n\n  exit() {\n    if (this.clearFirst && this.input.length > 0) {\n      this.reset();\n    } else {\n      this.done = this.exited = true;\n      this.aborted = false;\n      this.fire();\n      this.render();\n      this.out.write('\\n');\n      this.close();\n    }\n  }\n\n  abort() {\n    this.done = this.aborted = true;\n    this.exited = false;\n    this.fire();\n    this.render();\n    this.out.write('\\n');\n    this.close();\n  }\n\n  submit() {\n    this.done = true;\n    this.aborted = this.exited = false;\n    this.fire();\n    this.render();\n    this.out.write('\\n');\n    this.close();\n  }\n\n  _(c, key) {\n    let s1 = this.input.slice(0, this.cursor);\n    let s2 = this.input.slice(this.cursor);\n    this.input = `${s1}${c}${s2}`;\n    this.cursor = s1.length + 1;\n    this.complete(this.render);\n    this.render();\n  }\n\n  delete() {\n    if (this.cursor === 0) return this.bell();\n    let s1 = this.input.slice(0, this.cursor - 1);\n    let s2 = this.input.slice(this.cursor);\n    this.input = `${s1}${s2}`;\n    this.complete(this.render);\n    this.cursor = this.cursor - 1;\n    this.render();\n  }\n\n  deleteForward() {\n    if (this.cursor * this.scale >= this.rendered.length) return this.bell();\n    let s1 = this.input.slice(0, this.cursor);\n    let s2 = this.input.slice(this.cursor + 1);\n    this.input = `${s1}${s2}`;\n    this.complete(this.render);\n    this.render();\n  }\n\n  first() {\n    this.moveSelect(0);\n    this.render();\n  }\n\n  last() {\n    this.moveSelect(this.suggestions.length - 1);\n    this.render();\n  }\n\n  up() {\n    if (this.select === 0) {\n      this.moveSelect(this.suggestions.length - 1);\n    } else {\n      this.moveSelect(this.select - 1);\n    }\n\n    this.render();\n  }\n\n  down() {\n    if (this.select === this.suggestions.length - 1) {\n      this.moveSelect(0);\n    } else {\n      this.moveSelect(this.select + 1);\n    }\n\n    this.render();\n  }\n\n  next() {\n    if (this.select === this.suggestions.length - 1) {\n      this.moveSelect(0);\n    } else this.moveSelect(this.select + 1);\n\n    this.render();\n  }\n\n  nextPage() {\n    this.moveSelect(Math.min(this.select + this.limit, this.suggestions.length - 1));\n    this.render();\n  }\n\n  prevPage() {\n    this.moveSelect(Math.max(this.select - this.limit, 0));\n    this.render();\n  }\n\n  left() {\n    if (this.cursor <= 0) return this.bell();\n    this.cursor = this.cursor - 1;\n    this.render();\n  }\n\n  right() {\n    if (this.cursor * this.scale >= this.rendered.length) return this.bell();\n    this.cursor = this.cursor + 1;\n    this.render();\n  }\n\n  renderOption(v, hovered, isStart, isEnd) {\n    let desc;\n    let prefix = isStart ? figures.arrowUp : isEnd ? figures.arrowDown : ' ';\n    let title = hovered ? color.cyan().underline(v.title) : v.title;\n    prefix = (hovered ? color.cyan(figures.pointer) + ' ' : '  ') + prefix;\n\n    if (v.description) {\n      desc = ` - ${v.description}`;\n\n      if (prefix.length + title.length + desc.length >= this.out.columns || v.description.split(/\\r?\\n/).length > 1) {\n        desc = '\\n' + wrap(v.description, {\n          margin: 3,\n          width: this.out.columns\n        });\n      }\n    }\n\n    return prefix + ' ' + title + color.gray(desc || '');\n  }\n\n  render() {\n    if (this.closed) return;\n    if (this.firstRender) this.out.write(cursor.hide);else this.out.write(clear(this.outputText, this.out.columns));\n    super.render();\n    let {\n      startIndex,\n      endIndex\n    } = entriesToDisplay(this.select, this.choices.length, this.limit);\n    this.outputText = [style.symbol(this.done, this.aborted, this.exited), color.bold(this.msg), style.delimiter(this.completing), this.done && this.suggestions[this.select] ? this.suggestions[this.select].title : this.rendered = this.transform.render(this.input)].join(' ');\n\n    if (!this.done) {\n      const suggestions = this.suggestions.slice(startIndex, endIndex).map((item, i) => this.renderOption(item, this.select === i + startIndex, i === 0 && startIndex > 0, i + startIndex === endIndex - 1 && endIndex < this.choices.length)).join('\\n');\n      this.outputText += `\\n` + (suggestions || color.gray(this.fallback.title));\n    }\n\n    this.out.write(erase.line + cursor.to(0) + this.outputText);\n  }\n\n}\n\nmodule.exports = AutocompletePrompt;","map":{"version":3,"names":["color","require","Prompt","erase","cursor","style","clear","figures","wrap","entriesToDisplay","getVal","arr","i","value","title","getTitle","getIndex","valOrTitle","index","findIndex","el","undefined","AutocompletePrompt","constructor","opts","msg","message","suggest","choices","initial","select","i18n","noMatches","fallback","clearFirst","suggestions","input","limit","transform","render","scale","bind","complete","out","columns","fb","_fb","Number","isSafeInteger","parseInt","choice","moveSelect","length","fire","cb","p","completing","map","s","description","l","Math","max","min","reset","exit","done","exited","aborted","write","close","abort","submit","_","c","key","s1","slice","s2","delete","bell","deleteForward","rendered","first","last","up","down","next","nextPage","prevPage","left","right","renderOption","v","hovered","isStart","isEnd","desc","prefix","arrowUp","arrowDown","cyan","underline","pointer","split","margin","width","gray","closed","firstRender","hide","outputText","startIndex","endIndex","symbol","bold","delimiter","join","item","line","to","module","exports"],"sources":["C:/Users/gsess/node_modules/prompts/lib/elements/autocomplete.js"],"sourcesContent":["'use strict';\n\nconst color = require('kleur');\nconst Prompt = require('./prompt');\nconst { erase, cursor } = require('sisteransi');\nconst { style, clear, figures, wrap, entriesToDisplay } = require('../util');\n\nconst getVal = (arr, i) => arr[i] && (arr[i].value || arr[i].title || arr[i]);\nconst getTitle = (arr, i) => arr[i] && (arr[i].title || arr[i].value || arr[i]);\nconst getIndex = (arr, valOrTitle) => {\n  const index = arr.findIndex(el => el.value === valOrTitle || el.title === valOrTitle);\n  return index > -1 ? index : undefined;\n};\n\n/**\n * TextPrompt Base Element\n * @param {Object} opts Options\n * @param {String} opts.message Message\n * @param {Array} opts.choices Array of auto-complete choices objects\n * @param {Function} [opts.suggest] Filter function. Defaults to sort by title\n * @param {Number} [opts.limit=10] Max number of results to show\n * @param {Number} [opts.cursor=0] Cursor start position\n * @param {String} [opts.style='default'] Render style\n * @param {String} [opts.fallback] Fallback message - initial to default value\n * @param {String} [opts.initial] Index of the default value\n * @param {Boolean} [opts.clearFirst] The first ESCAPE keypress will clear the input\n * @param {Stream} [opts.stdin] The Readable stream to listen to\n * @param {Stream} [opts.stdout] The Writable stream to write readline data to\n * @param {String} [opts.noMatches] The no matches found label\n */\nclass AutocompletePrompt extends Prompt {\n  constructor(opts={}) {\n    super(opts);\n    this.msg = opts.message;\n    this.suggest = opts.suggest;\n    this.choices = opts.choices;\n    this.initial = typeof opts.initial === 'number'\n      ? opts.initial\n      : getIndex(opts.choices, opts.initial);\n    this.select = this.initial || opts.cursor || 0;\n    this.i18n = { noMatches: opts.noMatches || 'no matches found' };\n    this.fallback = opts.fallback || this.initial;\n    this.clearFirst = opts.clearFirst || false;\n    this.suggestions = [];\n    this.input = '';\n    this.limit = opts.limit || 10;\n    this.cursor = 0;\n    this.transform = style.render(opts.style);\n    this.scale = this.transform.scale;\n    this.render = this.render.bind(this);\n    this.complete = this.complete.bind(this);\n    this.clear = clear('', this.out.columns);\n    this.complete(this.render);\n    this.render();\n  }\n\n  set fallback(fb) {\n    this._fb = Number.isSafeInteger(parseInt(fb)) ? parseInt(fb) : fb;\n  }\n\n  get fallback() {\n    let choice;\n    if (typeof this._fb === 'number')\n      choice = this.choices[this._fb];\n    else if (typeof this._fb === 'string')\n      choice = { title: this._fb };\n    return choice || this._fb || { title: this.i18n.noMatches };\n  }\n\n  moveSelect(i) {\n    this.select = i;\n    if (this.suggestions.length > 0)\n      this.value = getVal(this.suggestions, i);\n    else this.value = this.fallback.value;\n    this.fire();\n  }\n\n  async complete(cb) {\n    const p = (this.completing = this.suggest(this.input, this.choices));\n    const suggestions = await p;\n\n    if (this.completing !== p) return;\n    this.suggestions = suggestions\n      .map((s, i, arr) => ({ title: getTitle(arr, i), value: getVal(arr, i), description: s.description }));\n    this.completing = false;\n    const l = Math.max(suggestions.length - 1, 0);\n    this.moveSelect(Math.min(l, this.select));\n\n    cb && cb();\n  }\n\n  reset() {\n    this.input = '';\n    this.complete(() => {\n      this.moveSelect(this.initial !== void 0 ? this.initial : 0);\n      this.render();\n    });\n    this.render();\n  }\n\n  exit() {\n    if (this.clearFirst && this.input.length > 0) {\n      this.reset();\n    } else {\n      this.done = this.exited = true; \n      this.aborted = false;\n      this.fire();\n      this.render();\n      this.out.write('\\n');\n      this.close();\n    }\n  }\n\n  abort() {\n    this.done = this.aborted = true;\n    this.exited = false;\n    this.fire();\n    this.render();\n    this.out.write('\\n');\n    this.close();\n  }\n\n  submit() {\n    this.done = true;\n    this.aborted = this.exited = false;\n    this.fire();\n    this.render();\n    this.out.write('\\n');\n    this.close();\n  }\n\n  _(c, key) {\n    let s1 = this.input.slice(0, this.cursor);\n    let s2 = this.input.slice(this.cursor);\n    this.input = `${s1}${c}${s2}`;\n    this.cursor = s1.length+1;\n    this.complete(this.render);\n    this.render();\n  }\n\n  delete() {\n    if (this.cursor === 0) return this.bell();\n    let s1 = this.input.slice(0, this.cursor-1);\n    let s2 = this.input.slice(this.cursor);\n    this.input = `${s1}${s2}`;\n    this.complete(this.render);\n    this.cursor = this.cursor-1;\n    this.render();\n  }\n\n  deleteForward() {\n    if(this.cursor*this.scale >= this.rendered.length) return this.bell();\n    let s1 = this.input.slice(0, this.cursor);\n    let s2 = this.input.slice(this.cursor+1);\n    this.input = `${s1}${s2}`;\n    this.complete(this.render);\n    this.render();\n  }\n\n  first() {\n    this.moveSelect(0);\n    this.render();\n  }\n\n  last() {\n    this.moveSelect(this.suggestions.length - 1);\n    this.render();\n  }\n\n  up() {\n    if (this.select === 0) {\n      this.moveSelect(this.suggestions.length - 1);\n    } else {\n      this.moveSelect(this.select - 1);\n    }\n    this.render();\n  }\n\n  down() {\n    if (this.select === this.suggestions.length - 1) {\n      this.moveSelect(0);\n    } else {\n      this.moveSelect(this.select + 1);\n    }\n    this.render();\n  }\n\n  next() {\n    if (this.select === this.suggestions.length - 1) {\n      this.moveSelect(0);\n    } else this.moveSelect(this.select + 1);\n    this.render();\n  }\n\n  nextPage() {\n    this.moveSelect(Math.min(this.select + this.limit, this.suggestions.length - 1));\n    this.render();\n  }\n\n  prevPage() {\n    this.moveSelect(Math.max(this.select - this.limit, 0));\n    this.render();\n  }\n\n  left() {\n    if (this.cursor <= 0) return this.bell();\n    this.cursor = this.cursor-1;\n    this.render();\n  }\n\n  right() {\n    if (this.cursor*this.scale >= this.rendered.length) return this.bell();\n    this.cursor = this.cursor+1;\n    this.render();\n  }\n\n  renderOption(v, hovered, isStart, isEnd) {\n    let desc;\n    let prefix = isStart ? figures.arrowUp : isEnd ? figures.arrowDown : ' ';\n    let title = hovered ? color.cyan().underline(v.title) : v.title;\n    prefix = (hovered ? color.cyan(figures.pointer) + ' ' : '  ') + prefix;\n    if (v.description) {\n      desc = ` - ${v.description}`;\n      if (prefix.length + title.length + desc.length >= this.out.columns\n        || v.description.split(/\\r?\\n/).length > 1) {\n        desc = '\\n' + wrap(v.description, { margin: 3, width: this.out.columns })\n      }\n    }\n    return prefix + ' ' + title + color.gray(desc || '');\n  }\n\n  render() {\n    if (this.closed) return;\n    if (this.firstRender) this.out.write(cursor.hide);\n    else this.out.write(clear(this.outputText, this.out.columns));\n    super.render();\n\n    let { startIndex, endIndex } = entriesToDisplay(this.select, this.choices.length, this.limit);\n\n    this.outputText = [\n      style.symbol(this.done, this.aborted, this.exited),\n      color.bold(this.msg),\n      style.delimiter(this.completing),\n      this.done && this.suggestions[this.select]\n        ? this.suggestions[this.select].title\n        : this.rendered = this.transform.render(this.input)\n    ].join(' ');\n\n    if (!this.done) {\n      const suggestions = this.suggestions\n        .slice(startIndex, endIndex)\n        .map((item, i) =>  this.renderOption(item,\n          this.select === i + startIndex,\n          i === 0 && startIndex > 0,\n          i + startIndex === endIndex - 1 && endIndex < this.choices.length))\n        .join('\\n');\n      this.outputText += `\\n` + (suggestions || color.gray(this.fallback.title));\n    }\n\n    this.out.write(erase.line + cursor.to(0) + this.outputText);\n  }\n}\n\nmodule.exports = AutocompletePrompt;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}